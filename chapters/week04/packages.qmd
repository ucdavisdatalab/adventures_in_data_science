# Packages {#sec-packages}

:::{.callout-note title="Learning Goals" collapse="false"}
After this lesson, you should be able to:

* Install packages from CRAN
* Get a list of installed packages
* Load packages you've installed
* Get a list of loaded packages
:::


A **package** is a collection of functions for use in R. Packages usually
include documentation, and can also contain examples, vignettes, and data sets.
Most packages are developed by members of the R community, so quality varies.
There are also a few packages that are built into R but provide extra features.
We'll use packages in many of the following chapters, so we're learning about
them now.

The [Comprehensive R Archive Network][cran], or CRAN, is the main place people
publish packages. As of writing, there were 23,094 packages posted to CRAN.
This number has been steadily increasing as R has grown in popularity.

[cran]: https://cran.r-project.org/

Packages span a wide variety of topics and disciplines. There are packages
related to statistics, social sciences, geography, genetics, physics, biology,
pharmacology, economics, agriculture, and more. The best way to find packages
is to search online, but the CRAN website also provides ["task
views"][cran-task-views] if you want to browse popular packages related to a
specific discipline.

[cran-task-views]: https://cran.r-project.org/web/views/


## Installing Packages

The `install.packages` function installs one or more packages from CRAN. Its
first argument is the packages to install, as a character vector.

When you run `install.packages`, R will ask you to choose which **mirror** to
download the package from. A mirror is a web server that has the same set of
files as some other server. Mirrors are used to make downloads faster and to
provide redundancy so that if a server stops working, files are still available
somewhere else. CRAN has dozens of mirrors; you should choose one that's
geographically nearby, since that usually produces the best download speeds. If
you aren't sure which mirror to choose, you can use the 0-Cloud mirror, which
attempts to automatically choose a mirror near you.

As an example, here's the code to install the remotes package:

```{r, eval = FALSE}
install.packages("remotes")
```

If you run the code above, you'll be asked to select a mirror, and then see
output that looks something like this:

```
--- Please select a CRAN mirror for use in this session ---
trying URL 'https://cloud.r-project.org/src/contrib/remotes_2.3.0.tar.gz'
Content type 'application/x-gzip' length 148405 bytes (144 KB)
==================================================
downloaded 144 KB

* installing *source* package ‘remotes’ ...
** package ‘remotes’ successfully unpacked and MD5 sums checked
** using staged installation
** R
** inst
** byte-compile and prepare package for lazy loading
** help
*** installing help indices
** building package indices
** installing vignettes
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (remotes)

The downloaded source packages are in
        ‘/tmp/Rtmp8t6iGa/downloaded_packages’
```

R goes through a variety of steps to install a package, even installing other
packages that the package depends on. You can tell that a package installation
succeeded by the final line `DONE`. When a package installation fails, R prints
an error message explaining the problem instead.

Once a package is installed, it stays on your computer until you remove it or
remove R. This means you only need to install each package once. However, most
packages are periodically updated. You can reinstall a package using
`install.packages` the same way as above to get the latest version.

Alternatively, you can update all of the R packages you have installed at once
by calling the `update.packages` function. Beware that this may take a long
time if you have a lot of packages installed.

The function to remove packages is `remove.packages`. Like `install.packages`,
this function's first argument is the packages to remove, as a character
vector.

If you want to see which packages are installed, you can use the
`installed.packages` function. It does not require any arguments. It returns a
matrix with one row for each package and columns that contain a variety of
information. Here's an example:

```{r}
packages = installed.packages()
# Just print the version numbers for 10 packages.
packages[1:10, "Version"]
```

You'll see a different set of packages, since you have a different computer.


## Loading Packages

Before you can use the functions (or other resources) in an installed package,
you must load the package with the `library` function. R doesn't load packages
automatically because each package you load uses memory and may conflict with
other packages. Thus you should only load the packages you need for whatever
it is that you want to do. When you restart R, the loaded packages are cleared
and you must again load any packages you want to use.

Let's load the remotes package we installed earlier:

```{r}
library("remotes")
```

The `library` function works with or without quotes around the package name, so
you may also see people write things like `library(remotes)`. We recommend
using quotes to make it unambiguous that you are not referring to a variable.

A handful of packages print out a message when loaded, but the vast majority do
not. Thus you can assume the call to `library` was successful if nothing is
printed. If something goes wrong while loading a package, R will print out an
error message explaining the problem.

Finally, not all R packages are published to CRAN. [GitHub][gh] is another
popular place to publish R packages, especially ones that are experimental or
still in development. Unlike CRAN, GitHub is a general-purpose website for
publishing code written in any programming language, so it contains much more
than just R packages and is not specifically R-focused.

[gh]: https://github.com/

The remotes package that we just installed and loaded provides functions to
install packages from GitHub. It is generally better to install packages from
CRAN when they are available there, since the versions on CRAN tend to be more
stable and intended for a wide audience. However, if you want to install a
package from GitHub, you can learn more about the remotes package by reading
its [online documentation][remotes].

[remotes]: https://remotes.r-lib.org/
